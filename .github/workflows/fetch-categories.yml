# .github/workflows/fetch-categories.yml
name: Fetch Filstar Categories

on:
  workflow_dispatch:  # Ръчно стартиране

jobs:
  fetch-categories:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm install node-fetch
      
      - name: Fetch categories
        env:
          FILSTAR_API_TOKEN: ${{ secrets.FILSTAR_API_TOKEN }}
        run: node fetch-categories.js
      
      - name: Upload categories list
        uses: actions/upload-artifact@v4
        with:
          name: filstar-categories
          path: filstar-categories.json
